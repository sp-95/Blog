<h1><%= @post.title %></h1>

<%= @post.text %>

<h2>Comments</h2>

<% @post.comments.each do |comment| %>
  <p><%= comment.commented_by %></p>
	<p><%= comment.text %></p>
	<p><%= time_ago_in_words comment.created_at %> ago</p>
	<p>
    <%- if user_signed_in? && (comment.commented_by == current_user.email) %>
      <%= link_to "Delete comment", [@post, comment], :method => :delete, data: {:confirm => "Are you sure?"} %>
    <% end %>
  </p>
<% end %>

<%- if user_signed_in?%>
<%= form_for [@post, @post.comments.build] do |f| %>
	<p><%= f.text_area :text, :size => '40x10' %></p>
	<p><%= f.submit "Post comment" %></p>
<% end %>
<% end %>

<button><%= link_to "Back", posts_path %></button>
<%- if user_signed_in?%>
<button><%= link_to "Edit", edit_post_path(@post) %></button>
<button><%= link_to "Delete", @post, :method => :delete, data: {:confirm => "Are you sure?"} %></button>
<%- else%>
<button><%= link_to 'Log In', new_user_session_path %></button>
<% end %>
<p>
  <%- if user_signed_in?%>
  <%= link_to 'Log out', destroy_user_session_path, method: 'delete' %>
  <% end %>
</p>